export const ACCOUNTING_WORDS = [
  {
    date: "2024-10-05",
    theme: "Tax",
    word: "ACCRUAL",
    characterCount: 7,
  },
  {
    date: "2024-10-06",
    theme: "Investing",
    word: "CAPTABLE",
    characterCount: 8,
  },
  {
    date: "2024-10-07",
    theme: "Accounting 101",
    word: "CREDIT",
    characterCount: 6,
  },
  {
    date: "2024-10-08",
    theme: "Managerial",
    word: "EBITDA",
    characterCount: 6,
  },
  {
    date: "2024-10-09",
    theme: "Accounting 101",
    word: "OPEX",
    characterCount: 4,
  },
  {
    date: "2024-10-10",
    theme: "Tax",
    word: "GAAP",
    characterCount: 4,
  },
  {
    date: "2024-10-11",
    theme: "Investing",
    word: "INVESTOR",
    characterCount: 8,
  },
  {
    date: "2024-10-12",
    theme: "Investing",
    word: "ANALYST",
    characterCount: 7,
  },
  {
    date: "2024-10-13",
    theme: "Managerial",
    word: "PROFORMA",
    characterCount: 8,
  },
  {
    date: "2024-10-14",
    theme: "Accounting 101",
    word: "INTEREST",
    characterCount: 8,
  },
  {
    date: "2024-10-15",
    theme: "Excel",
    word: "HLOOKUP",
    characterCount: 7,
  },
  {
    date: "2024-10-16",
    theme: "Managerial",
    word: "MODEL",
    characterCount: 5,
  },
  {
    date: "2024-10-17",
    theme: "Excel",
    word: "GOALSEEK",
    characterCount: 8,
  },
  {
    date: "2024-10-18",
    theme: "Accounting 101",
    word: "EQUITY",
    characterCount: 6,
  },
  {
    date: "2024-10-19",
    theme: "Managerial",
    word: "RECOUP",
    characterCount: 6,
  },
  {
    date: "2024-10-20",
    theme: "Accounting 101",
    word: "GROSS",
    characterCount: 5,
  },
  {
    date: "2024-10-21",
    theme: "Investing",
    word: "MARKET",
    characterCount: 6,
  },
  {
    date: "2024-10-22",
    theme: "Accounting 101",
    word: "MARGIN",
    characterCount: 6,
  },
  {
    date: "2024-10-23",
    theme: "Accounting 101",
    word: "ASSETS",
    characterCount: 6,
  },
  {
    date: "2024-10-24",
    theme: "Accounting 101",
    word: "LIABILITY",
    characterCount: 9,
  },
  {
    date: "2024-10-25",
    theme: "Accounting 101",
    word: "BADDEBT",
    characterCount: 7,
  },
  {
    date: "2024-10-26",
    theme: "Managerial",
    word: "FCF",
    characterCount: 3,
  },
  {
    date: "2024-10-27",
    theme: "Managerial",
    word: "CAPITAL",
    characterCount: 7,
  },
  {
    date: "2024-10-28",
    theme: "Investing",
    word: "EARNINGS",
    characterCount: 8,
  },
  {
    date: "2024-10-29",
    theme: "Excel",
    word: "SUMIF",
    characterCount: 5,
  },
  {
    date: "2024-10-30",
    theme: "Tax",
    word: "REFUND",
    characterCount: 6,
  },
  {
    date: "2024-10-31",
    theme: "Accounting 101",
    word: "VARIABLE",
    characterCount: 8,
  },
  {
    date: "2024-11-01",
    theme: "Investing",
    word: "NPV",
    characterCount: 3,
  },
  {
    date: "2024-11-02",
    theme: "Accounting 101",
    word: "PANDL",
    characterCount: 5,
  },
  {
    date: "2024-11-03",
    theme: "Investing",
    word: "BONDS",
    characterCount: 5,
  },
  {
    date: "2024-11-04",
    theme: "Accounting 101",
    word: "FIXED",
    characterCount: 5,
  },
  {
    date: "2024-11-05",
    theme: "Accounting 101",
    word: "CAPITAL",
    characterCount: 7,
  },
  {
    date: "2024-11-06",
    theme: "Investing",
    word: "TERMS",
    characterCount: 5,
  },
  {
    date: "2024-11-07",
    theme: "Managerial",
    word: "RUNWAY",
    characterCount: 6,
  },
  {
    date: "2024-11-08",
    theme: "Managerial",
    word: "YOY",
    characterCount: 3,
  },
  {
    date: "2024-11-09",
    theme: "Excel",
    word: "INDEX",
    characterCount: 5,
  },
  {
    date: "2024-11-10",
    theme: "Accounting 101",
    word: "AMORT",
    characterCount: 5,
  },
  {
    date: "2024-11-11",
    theme: "Accounting 101",
    word: "BANK",
    characterCount: 4,
  },
  {
    date: "2024-11-12",
    theme: "Managerial",
    word: "FILING",
    characterCount: 6,
  },
  {
    date: "2024-11-13",
    theme: "Accounting 101",
    word: "ACCRUE",
    characterCount: 6,
  },
  {
    date: "2024-11-14",
    theme: "Tax",
    word: "IRS",
    characterCount: 3,
  },
  {
    date: "2024-11-15",
    theme: "Accounting 101",
    word: "BILLS",
    characterCount: 5,
  },
  {
    date: "2024-11-16",
    theme: "Accounting 101",
    word: "COA",
    characterCount: 3,
  },
  {
    date: "2024-11-17",
    theme: "Accounting 101",
    word: "GOODS",
    characterCount: 5,
  },
  {
    date: "2024-11-18",
    theme: "Accounting 101",
    word: "SALES",
    characterCount: 5,
  },
  {
    date: "2024-11-19",
    theme: "Investing",
    word: "HEDGE",
    characterCount: 5,
  },
  {
    date: "2024-11-20",
    theme: "Accounting 101",
    word: "LEDGER",
    characterCount: 6,
  },
  {
    date: "2024-11-21",
    theme: "Tax",
    word: "ENTITY",
    characterCount: 6,
  },
  {
    date: "2024-11-22",
    theme: "Investing",
    word: "GAINS",
    characterCount: 5,
  },
  {
    date: "2024-11-23",
    theme: "Accounting 101",
    word: "TRIAL",
    characterCount: 5,
  },
  {
    date: "2024-11-24",
    theme: "Accounting 101",
    word: "DEDUCT",
    characterCount: 6,
  },
  {
    date: "2024-11-25",
    theme: "Accounting 101",
    word: "INCOME",
    characterCount: 6,
  },
  {
    date: "2024-11-26",
    theme: "Investing",
    word: "INDEX",
    characterCount: 5,
  },
  {
    date: "2024-11-27",
    theme: "Accounting 101",
    word: "EXPENSE",
    characterCount: 7,
  },
  {
    date: "2024-11-28",
    theme: "Accounting 101",
    word: "CPA",
    characterCount: 3,
  },
  {
    date: "2024-11-29",
    theme: "Tax",
    word: "ANNUAL",
    characterCount: 6,
  },
  {
    date: "2024-11-30",
    theme: "Tax",
    word: "NEXUS",
    characterCount: 5,
  },
];

export const getWordForDate = (date) => {
  if (!date || !ACCOUNTING_WORDS || !Array.isArray(ACCOUNTING_WORDS)) {
    return null;
  }

  // Convert to PT/Los Angeles timezone
  const ptDate = new Date(
    date.toLocaleString("en-US", { timeZone: "America/Los_Angeles" })
  );

  // Get current date in PT
  const currentPTDate = new Date(
    new Date().toLocaleString("en-US", { timeZone: "America/Los_Angeles" })
  );

  // Reset time parts for accurate date comparison
  currentPTDate.setHours(0, 0, 0, 0);
  ptDate.setHours(0, 0, 0, 0);

  // If requested date is in the future, return null
  if (ptDate > currentPTDate) {
    return null;
  }

  // Format the PT date as YYYY-MM-DD
  const dateString =
    ptDate.getFullYear() +
    "-" +
    String(ptDate.getMonth() + 1).padStart(2, "0") +
    "-" +
    String(ptDate.getDate()).padStart(2, "0");

  return ACCOUNTING_WORDS.find((entry) => entry.date === dateString);
};

export const findLatestAvailableDate = () => {
  if (!ACCOUNTING_WORDS || !Array.isArray(ACCOUNTING_WORDS)) {
    return null;
  }

  // Get current date in PT
  const currentPTDate = new Date(
    new Date().toLocaleString("en-US", { timeZone: "America/Los_Angeles" })
  );
  currentPTDate.setHours(0, 0, 0, 0);

  // Create dates in PT timezone and filter out future dates
  const sortedEntries = ACCOUNTING_WORDS.map((entry) => ({
    date: new Date(entry.date + "T00:00:00-08:00"), // Force PT timezone
    original: entry,
  }))
    .filter((entry) => entry.date <= currentPTDate) // Filter out future dates
    .sort((a, b) => b.date - a.date);

  return sortedEntries[0]?.original;
};
